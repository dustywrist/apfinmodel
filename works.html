<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta property="og:title" content="NOT" />
  <meta property="og:description" content="imaginary music site" />
  <link rel="icon" type="image/x-icon" href="images/favicon.png" />
  <link rel="stylesheet" href="stylesheets/content.css" />
  <link rel="stylesheet" href="stylesheets/adaptive.css" />
  <title>NOT</title>
</head>
<body>
  <section class="main_menu">
    <section class="hi_to_hi">
      <button class="main_hi" id="langToggle" data-i18n="lang"></button>
    </section>
    <section class="three_words_meny">
      <button class="go-author" data-i18n="author">Author</button>
      <button class="go-works" data-i18n="works">Works</button>
      <button class="go-pictures" data-i18n="pictures">Pictures</button>
    </section>
  </section>

  <section class="my_works">
    <section class="panel">
      <button class="button_1" id="pan_1" data-i18n="zineDesign">Zine design</button>
      <div class="zine_work">
        <video class="panel_video" muted loop preload="none" playsinline loading="lazy">
          <source src="../apfinmodel/images/book_prew.mp4" type="video/mp4" />
        </video>
      </div>
    </section>

    <section class="panel">
      <button class="button_1" id="pan_2" data-i18n="creativeWebsite">Creative website for the festival</button>
      <div class="creative_website">
        <video class="panel_video" muted loop preload="none" playsinline loading="lazy">
          <source src="../apfinmodel/images/cite_prew_video.mp4" type="video/mp4" />
        </video>
      </div>
    </section>

    <section class="panel">
      <button class="button_1" id="pan_3" data-i18n="posters">Posters</button>
      <div class="posters">
        <video class="panel_video" muted loop preload="none" playsinline loading="lazy">
          <source src="../apfinmodel/images/00000-0220.mp4" type="video/mp4" />
        </video>
      </div>
    </section>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="stylesheets/java-script.js"></script>

  <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–∞–Ω–µ–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    function setPanelSizes() {
      const panels = document.querySelectorAll('.panel');
      
      // –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –≤–µ—Ä—Å–∏–∏
      if (window.innerWidth > 1024) {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –ø–∞–Ω–µ–ª–µ–π
        const imageUrls = [
          './images/book_prew_1.png',
          './images/site_prew.png',
          './images/poster_prew.png'
        ];
        
        // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
        imageUrls.forEach((url, index) => {
          const img = new Image();
          img.onload = function() {
            const aspectRatio = this.width / this.height;
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É –ø–∞–Ω–µ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω
            panels[index].style.width = `${100 * aspectRatio}vh`;
            
            // –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–æ–≤, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª –∞–Ω–∏–º–∞—Ü–∏—é
            if (index === imageUrls.length - 1) {
              initScrollAnimation();
            }
          };
          img.src = url;
        });
      } else {
        // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –ø—Ä–æ—Å—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª
        initScrollAnimation();
      }
    }

    gsap.registerPlugin(ScrollTrigger);

    function initScrollAnimation() {
      // –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ ScrollTrigger
      ScrollTrigger.getAll().forEach(trigger => trigger.kill());

      const screenWidth = window.innerWidth;

      // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–æ–≤
      if (screenWidth > 1024) {
        const panels = document.querySelectorAll('.panel');
        let totalWidth = 0;
        
        // –í—ã—á–∏—Å–ª—è–µ–º –æ–±—â—É—é —à–∏—Ä–∏–Ω—É –≤—Å–µ—Ö –ø–∞–Ω–µ–ª–µ–π
        panels.forEach(panel => {
          totalWidth += panel.offsetWidth;
        });
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ä–∞–≤–Ω–æ–π –æ–±—â–µ–π —à–∏—Ä–∏–Ω–µ –ø–∞–Ω–µ–ª–µ–π
        document.querySelector('.my_works').style.width = `${totalWidth}px`;
        
        // –í—ã—á–∏—Å–ª—è–µ–º –æ–±—â–µ–µ —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ (–æ–±—â–∞—è —à–∏—Ä–∏–Ω–∞ - —à–∏—Ä–∏–Ω–∞ –æ–∫–Ω–∞)
        const maxOffset = totalWidth - window.innerWidth;
        
        gsap.to(".my_works", {
          x: -maxOffset,
          ease: "none",
          scrollTrigger: {
            trigger: ".my_works",
            pin: true,
            scrub: 1,
            snap: {
              snapTo: 1 / (panels.length - 1),
              duration: {min: 0.1, max: 0.3},
              delay: 0
            },
            end: () => `+=${maxOffset}`
          }
        });
      }
    }

    // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('load', setPanelSizes);
    // –ò –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–∫–Ω–∞
    window.addEventListener('resize', () => {
      setPanelSizes();
    });

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏–∫–æ–Ω–æ–∫ –Ω–∞ –∫–Ω–æ–ø–∫–µ —è–∑—ã–∫–∞
    const btn = document.querySelector('.main_hi');
    const images = [
      'images/üåç.png',
      'images/ü§µ‚Äç‚ôÄÔ∏è.png',
      'images/üñº.png',
      'images/üìö.png'
    ];
    let currentIndex = 0;

    function updateButtonBackground() {
      btn.style.backgroundImage = `url(${images[currentIndex]})`;
    }

    updateButtonBackground();

    btn.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % images.length;
      updateButtonBackground();
    });

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–Ω–æ–ø–∫–∞–º
    btn.addEventListener('click', () => {
      window.location.href = 'index.html';
    });

    document.querySelector('.go-author')?.addEventListener('click', () => {
      window.location.href = 'author.html';
    });

    document.querySelector('.go-pictures')?.addEventListener('click', () => {
      window.location.href = 'pictures.html';
    });

    // –ù–∞–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –ø–∞–Ω–µ–ª—å ‚Äî –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ
    const panels = document.querySelectorAll(".panel");
    if (window.innerWidth > 1024) {
      panels.forEach(panel => {
        const video = panel.querySelector(".panel_video");
        panel.addEventListener("mouseenter", () => {
          if (video) {
            video.style.opacity = "1";
            video.play();
          }
        });
        panel.addEventListener("mouseleave", () => {
          if (video) {
            video.style.opacity = "0";
            setTimeout(() => {
              video.pause();
              video.currentTime = 0;
            }, 600);
          }
        });
      });
    }

    // –ü–µ—Ä–µ—Ö–æ–¥—ã –ø–æ –ø–∞–Ω–µ–ª—è–º
    document.querySelectorAll('.panel')[0]?.addEventListener('click', () => {
      window.location.href = 'zine.html';
    });

    document.querySelectorAll('.panel')[1]?.addEventListener('click', () => {
      window.location.href = 'cite.html';
    });

    document.querySelectorAll('.panel')[2]?.addEventListener('click', () => {
      window.location.href = 'posters.html';
    });

    // –Ø–∑—ã–∫–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    const translations = {
      ru: {
        author: "–ê–≤—Ç–æ—Ä",
        works: "–†–∞–±–æ—Ç—ã",
        pictures: "–ö–∞—Ä—Ç–∏–Ω–∫–∏",
        zineDesign: "–î–∏–∑–∞–π–Ω –∂—É—Ä–Ω–∞–ª–∞",
        creativeWebsite: "–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç –¥–ª—è —Ñ–µ—Å—Ç–∏–≤–∞–ª—è",
        posters: "–ü–ª–∞–∫–∞—Ç—ã"
      },
      en: {
        author: "Author",
        works: "Works",
        pictures: "Pictures",
        zineDesign: "Zine design",
        creativeWebsite: "Creative website for the festival",
        posters: "Posters"
      }
    };

    let currentLang = localStorage.getItem('siteLang') || 'en';

    const updateLanguage = () => {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[currentLang][key]) {
          el.textContent = translations[currentLang][key];
        }
      });
    };

    document.getElementById('langToggle').addEventListener('click', () => {
      currentLang = currentLang === 'ru' ? 'en' : 'ru';
      localStorage.setItem('siteLang', currentLang);
      updateLanguage();
    });

    updateLanguage();

    // –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
    gsap.fromTo('.main_hi',
      { opacity: 0 },
      {
        opacity: 1,
        duration: 1,
        ease: "power2.out"
      }
    );
  </script>
</body>
</html>