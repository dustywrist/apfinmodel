<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta property="og:title" content="NOT" />
  <meta property="og:description" content="imaginary music site" />
  <link rel="icon" type="image/x-icon" href="images/favicon.png" />
  <link rel="stylesheet" href="stylesheets/content.css" />
  <link rel="stylesheet" href="stylesheets/adaptive.css" />
  <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css" />
  <title>NOT</title>
</head>
<body>
  <iframe id="blurred-bg" src="works.html" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; pointer-events: none; filter: blur(100px); opacity: 0.5; z-index: 0; transform: scale(1.05); user-select: none;" loading="lazy"></iframe>

  <div id="black-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: rgba(0, 0, 0, 0.3); pointer-events: none; z-index: 1;"></div>

  <div class="content-wrapper">
    <div class="hover-left"></div>
    <div class="hover-right"></div>

    <section class="main_menu">
      <section class="hi_to_hi">
        <button class="main_hi" id="langToggle"></button>
      </section>
      <section class="three_words_meny">
        <button class="go-author" data-i18n="author">Author</button>
        <button class="go-works" data-i18n="works">Works</button>
        <button class="go-pictures" data-i18n="pictures">Pictures</button>
      </section>
    </section>

    <section class="opisanie_proekta">
      <div class="basic_text_1" data-i18n="projectDescription">
        <p>Zine has the format of a personal diary, and the main character is a DJ, a chronicler of NOT nightlife. His diary is not just notes, but a visual chronicle of everything that surrounded him.</p>
      </div>
      <div class="mini_podpisi">
        <div class="mini_podpisi_nachinka">
          <p class="curator" data-i18n="curatorLabel">–∫—É—Ä–∞—Ç–æ—Ä:</p>
          <p class="name_of_curator" data-i18n="curatorLabel_2">–í–∏–æ–ª–µ—Ç—Ç–∞ –õ—É–∫—å—è–Ω–æ–≤–∞</p>
        </div>
        <div class="pobochkam">
          <a class="loliki" data-i18n="link" href="https://hsedesign.ru/project/b9a024b7d20447d18695a4bd375ba1a1">View the full case</a>
        </div>
      </div>
    </section>

    <section class="nachinka_book">
      <section class="nachinka_book_photo">
        <img src="images/book_nachinka_1.png" alt="–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" loading="lazy" />
      </section>

      <section class="wrap_without_text_below mt_small">
        <div class="slider-container main-slider" data-flickity='{ "cellAlign": "center", "contain": true, "pageDots": false, "prevNextButtons": true, "draggable": true, "wrapAround": true, "selectedAttraction": 0.05, "friction": 0.6, "autoPlay": 3000 }'>
          <div class="carousel-cell"><img src="images/book_photo_1.png" class="is-selected" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_2.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_3.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_4.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_5.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_6.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_7.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_8.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_9.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_10.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_11.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_12.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_13.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_14.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_15.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_16.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_17.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_18.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_19.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_20.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_21.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_22.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_23.png" loading="lazy" /></div>
        </div>

        <div class="slider-container thumbnail-slider in_overlay" data-flickity='{ "asNavFor": ".main-slider", "contain": true, "pageDots": false, "prevNextButtons": false, "cellAlign": "left", "draggable": true }'>
          <div class="carousel-cell"><img src="images/book_photo_1.png" class="is-selected" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_2.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_3.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_4.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_5.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_6.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_7.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_8.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_9.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_10.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_11.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_12.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_13.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_14.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_15.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_16.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_17.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_18.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_19.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_20.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_21.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_22.png" loading="lazy" /></div>
          <div class="carousel-cell"><img src="images/book_photo_23.png" loading="lazy" /></div>
        </div>
      </section>

      <div class="clickable" id="overlay__project_click_bottom"></div>
    </section>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
  <script src="stylesheets/java-script.js"></script>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ–Ω–∞ –∫–Ω–æ–ø–∫–∏
    const btn = document.querySelector('.main_hi');
    const images = ['images/üìö.png'];
    let currentIndex = 0;

    function updateButtonBackground() {
      btn.style.backgroundImage = `url(${images[currentIndex]})`;
    }

    updateButtonBackground();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–∞–π–¥–µ—Ä–∞ Flickity
    const mainSlider = new Flickity('.main-slider', {
      cellAlign: 'center',
      contain: true,
      pageDots: false,
      prevNextButtons: true,
      draggable: true,
      wrapAround: true,
      selectedAttraction: 0.05,
      friction: 0.6,
      autoPlay: 3000,
      lazyLoad: true
    });

    const thumbnailSlider = new Flickity('.thumbnail-slider', {
      asNavFor: '.main-slider',
      contain: true,
      pageDots: false,
      prevNextButtons: false,
      cellAlign: 'left',
      draggable: true,
      lazyLoad: true
    });

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ —Å–æ—Å–µ–¥–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    function updateNeighborClasses() {
      const cells = mainSlider.getCellElements();
      cells.forEach(cell => {
        cell.classList.remove('is-prev', 'is-next', 'is-prev-prev', 'is-next-next');
      });

      let selectedIndex = mainSlider.selectedIndex;
      let prevIndex = selectedIndex - 1 < 0 ? cells.length - 1 : selectedIndex - 1;
      let nextIndex = (selectedIndex + 1) % cells.length;
      let prevPrevIndex = selectedIndex - 2 < 0 ? cells.length + (selectedIndex - 2) : selectedIndex - 2;
      let nextNextIndex = (selectedIndex + 2) % cells.length;

      cells[prevIndex].classList.add('is-prev');
      cells[nextIndex].classList.add('is-next');
      cells[prevPrevIndex].classList.add('is-prev-prev');
      cells[nextNextIndex].classList.add('is-next-next');
    }

    mainSlider.on('select', updateNeighborClasses);
    mainSlider.on('ready', updateNeighborClasses);

    // –ê–Ω–∏–º–∞—Ü–∏–∏ GSAP
    gsap.registerPlugin(ScrollTrigger);

    gsap.fromTo('.main_hi', 
      { opacity: 0 },
      { opacity: 1, duration: 1, ease: "power2.out" }
    );

    gsap.from('.opisanie_proekta > div', {
      scrollTrigger: {
        trigger: '.opisanie_proekta',
        start: 'top 80%'
      },
      opacity: 0,
      y: 30,
      stagger: 0.2,
      duration: 0.8,
      ease: "power2.out"
    });

    gsap.from('.nachinka_book_photo img', {
      scrollTrigger: {
        trigger: '.nachinka_book_photo',
        start: 'top 80%'
      },
      opacity: 0,
      scale: 0.9,
      duration: 0.8,
      ease: "power3.out"
    });

    gsap.from('.main-slider .carousel-cell', {
      scrollTrigger: {
        trigger: '.main-slider',
        start: 'top 85%'
      },
      opacity: 0,
      y: 50,
      stagger: 0.05,
      duration: 0.6,
      ease: "power3.out"
    });

gsap.from('.thumbnail-slider .carousel-cell', {
  scrollTrigger: {
    trigger: '.wrap_without_text_below', // —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    start: 'top 78%', 
  
  },
  opacity: 0,
  y: 30,
  stagger: 0.04,
  duration: 0.6,
  ease: "power2.out"
});
    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    document.querySelectorAll('.main_hi').forEach(btn => {
      btn.addEventListener('click', () => {
        window.location.href = 'index.html';
      });
    });

    document.querySelector('.go-author')?.addEventListener('click', () => {
      window.location.href = 'author.html';
    });

    document.querySelector('.go-pictures')?.addEventListener('click', () => {
      window.location.href = 'pictures.html';
    });

    document.querySelector('.go-works')?.addEventListener('click', () => {
      window.location.href = 'works.html';
    });

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞
    const translations = {
      en: {
        author: "Author",
        works: "Works",
        pictures: "Pictures",
        projectDescription: "Zine has the format of a personal diary, and the main character is a DJ, a chronicler of NOT nightlife. His diary is not just notes, but a visual chronicle of everything that surrounded him.",
        curatorLabel: "curator:",
        curatorLabel_2: "Violetta Lukyanova",
        link: "View the full case"
      },
      ru: {
        author: "–ê–≤—Ç–æ—Ä",
        works: "–†–∞–±–æ—Ç—ã",
        pictures: "–ö–∞—Ä—Ç–∏–Ω—ã",
        projectDescription: "–ó–∏–Ω –∏–º–µ–µ—Ç —Ñ–æ—Ä–º–∞—Ç –ª–∏—á–Ω–æ–≥–æ –¥–Ω–µ–≤–Ω–∏–∫–∞, –∞ –≥–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π ‚Äî –¥–∏–¥–∂–µ–π, —Ö—Ä–æ–Ω–∏–∫—ë—Ä –Ω–æ—á–Ω–æ–π –∂–∏–∑–Ω–∏ NOT. –î–Ω–µ–≤–Ω–∏–∫ ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Å–∏, –∞ –≤–∏–∑—É–∞–ª—å–Ω–∞—è —Ö—Ä–æ–Ω–∏–∫–∞ –≤—Å–µ–≥–æ, —á—Ç–æ –µ–≥–æ –æ–∫—Ä—É–∂–∞–ª–æ.",
        curatorLabel: "–∫—É—Ä–∞—Ç–æ—Ä:",
        curatorLabel_2: "–í–∏–æ–ª–µ—Ç—Ç–∞ –õ—É–∫—å—è–Ω–æ–≤–∞",
        link: "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–µ–π—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é"
      }
    };

    let currentLang = localStorage.getItem('siteLang') || 'en';

    const updateLanguage = () => {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[currentLang][key]) {
          el.textContent = translations[currentLang][key];
        }
      });
      document.getElementById('langToggle').textContent = currentLang === 'ru' ? '' : '';
    };

    document.getElementById('langToggle')?.addEventListener('click', () => {
      currentLang = currentLang === 'ru' ? 'en' : 'ru';
      localStorage.setItem('siteLang', currentLang);
      updateLanguage();
    });

    updateLanguage();

    // –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
    let isTransitioning = false;

    function startTransition() {
      if (isTransitioning) return;
      isTransitioning = true;

      document.body.style.overflow = 'hidden';

      gsap.to('.content-wrapper', {
        y: '-100vh',
        duration: 1.5,
        ease: 'power2.inOut',
        onComplete: () => {
          window.location.href = 'works.html';
        }
      });

      gsap.to('#blurred-bg', {
        filter: 'blur(0px)',
        opacity: 1,
        duration: 1.5,
        ease: 'power2.inOut'
      });

      gsap.to('#black-overlay', {
        opacity: 0,
        duration: 1.5,
        ease: 'power2.inOut'
      });
    }

    // –ü–µ—Ä–µ—Ö–æ–¥ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
    window.addEventListener('scroll', () => {
      const scrollTop = window.scrollY || document.documentElement.scrollTop;
      const windowHeight = window.innerHeight || document.documentElement.clientHeight;
      const docHeight = document.documentElement.scrollHeight;
      const buffer = windowHeight * 0.1;

      if (!isTransitioning && scrollTop + windowHeight + buffer >= docHeight) {
        startTransition();
      }
    });

    // –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –∫–ª–∏–∫—É
    document.getElementById('overlay__project_click_bottom').addEventListener('click', startTransition);
  </script>
</body>
</html>