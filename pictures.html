<!DOCTYPE html>
<html lang="en">
<head>
  <!-- –ú–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–∏–ª–∏ -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta property="og:title" content="NOT" />
  <meta property="og:description" content="imaginary music site" />
  <link rel="icon" type="image/x-icon" href="images/favicon.png" />
  <link rel="stylesheet" href="stylesheets/style.css" />
  <title>NOT</title>
  <style>
    /* –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∏–ª—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
    body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background-color: #ffffff;
      height: 100vh;
      position: relative;
      cursor: pointer;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≤–∏–¥–µ–æ */
    .media {
      position: absolute;
      object-fit: contain;
      opacity: 1;
      z-index: 2;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: transform 0.5s ease, opacity 0.5s ease;
      transform-origin: center;
      pointer-events: auto;
      will-change: transform;
    }

    .media:hover {
      transform: scale(1.05);
      z-index: 3;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }

    /* –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä */
    .fullscreen-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      backdrop-filter: blur(10px);
      background-color: rgba(0, 0, 0, 0.6);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .fullscreen-content {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      z-index: 10000;
    }

    
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
    @media (max-width: 1024px) {
      .media {
        border-radius: 12px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
      }
    }

    @media (max-width: 768px) {
      .media {
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
    }

    /* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é */
    .main_menu {
      position: fixed;
      z-index: 10;
    }
  </style>
</head>

<body>
  <!-- –†–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞ -->
  <iframe id="blurred-bg" src="works.html" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; filter: blur(100px); opacity: 0.5; z-index: 0; transform: scale(1.05); user-select: none;"></iframe>

  <!-- –¢—ë–º–Ω—ã–π –Ω–∞–ª–æ–∂–µ–Ω–Ω—ã–π —Å–ª–æ–π -->
  <div id="black-overlay" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.3); pointer-events: none; z-index: 1;"></div>

  <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ –∫–Ω–æ–ø–∫–∏ -->
  <section class="main_menu">
    <section class="hi_to_hi">
      <button class="main_hi" id="langToggle" data-i18n="lang"></button>
    </section>
    <section class="three_words_meny">
      <button class="go-author" data-i18n="author">Author</button>
      <button class="go-works" data-i18n="works">Works</button>
      <button class="go-pictures" data-i18n="pictures">Pictures</button>
    </section>
  </section>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–µ–¥–∏–∞ -->
  <div id="media-container"></div>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
  <div id="fullscreen-viewer" style="display: none;"></div>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <script>
    // –ú–µ–¥–∏–∞-—Ñ–∞–π–ª—ã
    const mediaSources = [
      { type: 'img', src: 'images/picture_gallery_1.png' },
      { type: 'img', src: 'images/picture_gallery_2.png' },
      { type: 'img', src: 'images/picture_gallery_4.png' },
      { type: 'img', src: 'images/picture_gallery_5.png' },
      { type: 'img', src: 'images/picture_gallery_6.png' },
      { type: 'img', src: 'images/picture_gallery_8.png' },
      { type: 'img', src: 'images/picture_gallery_9.png' },
      { type: 'img', src: 'images/picture_gallery_10.png' },
      { type: 'img', src: 'images/picture_gallery_11.png' },
      { type: 'video', src: 'images/2025-05-31 23.54.01.mp4' },
      { type: 'video', src: 'images/posters_1.mp4' },
      { type: 'video', src: 'images/picture_gallery_14.mp4' },
      { type: 'video', src: 'images/picture_gallery_15.mp4' },
    ];

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ
    let isOrganized = false;
    let originalPositions = [];
    const mediaElements = [];
    const mediaContainer = document.getElementById('media-container');
    const body = document.body;

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–¥–∏–∞
    function initializeMedia() {
      mediaContainer.innerHTML = '';
      mediaElements.length = 0;
      originalPositions.length = 0;

      mediaSources.forEach((media, index) => {
        const element = document.createElement(media.type);
        element.src = media.src;
        element.classList.add('media');
        element.dataset.index = index;

        if (media.type === 'video') {
          element.loop = true;
          element.muted = true;
          element.autoplay = true;
          element.playsInline = true;
        }

        mediaContainer.appendChild(element);
        mediaElements.push(element);
      });

      positionMediaRandomly();
    }

    // –°–ª—É—á–∞–π–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –º–µ–¥–∏–∞
    function positionMediaRandomly() {
      const viewportWidth = window.innerWidth;
      const viewportHeight = window.innerHeight;
      const padding = 50;

      mediaElements.forEach((element, index) => {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –º–µ–¥–∏–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –µ–≥–æ —Ä–∞–∑–º–µ—Ä—ã
        element.onload = element.onloadedmetadata = function() {
          const naturalWidth = element.naturalWidth || element.videoWidth || element.width;
          const naturalHeight = element.naturalHeight || element.videoHeight || element.height;
          const aspectRatio = naturalWidth / naturalHeight;

          // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
          let maxWidth, maxHeight;
          if (window.innerWidth <= 768) { // Mobile
            maxWidth = viewportWidth * 0.7;
            maxHeight = viewportHeight * 0.3;
          } else if (window.innerWidth <= 1024) { // Tablet
            maxWidth = viewportWidth * 0.5;
            maxHeight = viewportHeight * 0.4;
          } else { // Desktop
            maxWidth = viewportWidth * 0.4;
            maxHeight = viewportHeight * 0.5;
          }

          // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏
          let width, height;
          if (naturalWidth > naturalHeight) {
            width = Math.min(maxWidth, naturalWidth);
            height = width / aspectRatio;
          } else {
            height = Math.min(maxHeight, naturalHeight);
            width = height * aspectRatio;
          }

          // –°–ª—É—á–∞–π–Ω—ã–π –º–∞—Å—à—Ç–∞–± (0.7 - 1.3)
          const scale = 0.7 + Math.random() * 0.6;
          const scaledWidth = width * scale;
          const scaledHeight = height * scale;

          // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è —Å —É—á–µ—Ç–æ–º –≥—Ä–∞–Ω–∏—Ü
          const left = padding + Math.random() * (viewportWidth - scaledWidth - padding * 2);
          const top = padding + Math.random() * (viewportHeight - scaledHeight - padding * 2);

          // –°–ª—É—á–∞–π–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç (-15 –¥–æ 15 –≥—Ä–∞–¥—É—Å–æ–≤)
          const rotation = -15 + Math.random() * 30;

          // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
          originalPositions[index] = {
            left,
            top,
            width: scaledWidth,
            height: scaledHeight,
            rotation,
            scale
          };

          // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏
          element.style.width = `${scaledWidth}px`;
          element.style.height = `${scaledHeight}px`;
          element.style.left = `${left}px`;
          element.style.top = `${top}px`;
          element.style.transform = `rotate(${rotation}deg)`;

          // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
          element.addEventListener('click', function(e) {
            e.stopPropagation();
            showFullscreen(media.type, media.src);
          });
        };
      });
    }

    // –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–µ–¥–∏–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É
    function organizeMedia() {
      const viewportWidth = window.innerWidth;
      const viewportHeight = window.innerHeight;
      const centerX = viewportWidth / 2;
      const spacing = 20;
      let currentY = 50;

      mediaElements.forEach((element, index) => {
        const original = originalPositions[index];
        const aspectRatio = original.width / original.height;
        
        // –ù–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –≤–∏–¥–∞
        let newWidth = Math.min(viewportWidth * 0.6, original.width);
        let newHeight = newWidth / aspectRatio;

        // –ï—Å–ª–∏ –≤—ã—Å–æ—Ç–∞ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è, —É–º–µ–Ω—å—à–∞–µ–º
        if (newHeight > viewportHeight * 0.4) {
          newHeight = viewportHeight * 0.4;
          newWidth = newHeight * aspectRatio;
        }

        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
        const newLeft = centerX - newWidth / 2;
        const newTop = currentY;

        // –ê–Ω–∏–º–∞—Ü–∏—è —Å GSAP
        gsap.to(element, {
          left: newLeft,
          top: newTop,
          width: newWidth,
          height: newHeight,
          rotation: 0,
          duration: 0.8,
          ease: "power2.out"
        });

        currentY += newHeight + spacing;
      });
    }

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è
    function restoreRandomPositions() {
      mediaElements.forEach((element, index) => {
        const original = originalPositions[index];
        gsap.to(element, {
          left: original.left,
          top: original.top,
          width: original.width,
          height: original.height,
          rotation: original.rotation,
          duration: 0.8,
          ease: "power2.out"
        });
      });
    }

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
    function toggleMediaOrganization() {
      if (isOrganized) {
        restoreRandomPositions();
      } else {
        organizeMedia();
      }
      isOrganized = !isOrganized;
    }

    // –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
    function showFullscreen(type, src) {
      const viewer = document.getElementById('fullscreen-viewer');
      viewer.innerHTML = '';

      const overlay = document.createElement('div');
      overlay.className = 'fullscreen-overlay';
      
      const content = document.createElement(type);
      content.className = 'fullscreen-content';
      content.src = src;

      if (type === 'video') {
        content.controls = true;
        content.loop = true;
        content.autoplay = true;
      }

      overlay.appendChild(content);
      viewer.appendChild(overlay);
      viewer.style.display = 'block';

      // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É
      overlay.addEventListener('click', function(e) {
        if (e.target === overlay) {
          viewer.style.display = 'none';
        }
      });
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ —Å–≤–æ–±–æ–¥–Ω–æ–º—É –º–µ—Å—Ç—É
    body.addEventListener('click', function(e) {
      if (e.target === body || e.target === mediaContainer) {
        toggleMediaOrganization();
      }
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
    window.addEventListener('resize', function() {
      if (!isOrganized) {
        positionMediaRandomly();
      }
    });

    // –°–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏
    const btn = document.querySelector('.main_hi');
    const images = ['images/üñº.png'];
    let currentIndex = 0;

    function updateButtonBackground() {
      btn.style.backgroundImage = `url(${images[currentIndex]})`;
    }

    updateButtonBackground();

    btn.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % images.length;
      updateButtonBackground();
      window.location.href = 'index.html';
    });

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
    document.querySelector('.go-author')?.addEventListener('click', () => window.location.href = 'author.html');
    document.querySelector('.go-pictures')?.addEventListener('click', () => window.location.href = 'pictures.html');
    document.querySelector('.go-works')?.addEventListener('click', () => window.location.href = 'works.html');

    // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
    const translations = {
      ru: { author: "–ê–≤—Ç–æ—Ä", works: "–†–∞–±–æ—Ç—ã", pictures: "–ö–∞—Ä—Ç–∏–Ω–∫–∏" },
      en: { author: "Author", works: "Works", pictures: "Pictures" },
    };

    let currentLang = localStorage.getItem('siteLang') || 'en';

    function updateLanguage() {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[currentLang][key]) {
          el.textContent = translations[currentLang][key];
        }
      });
    }

    document.getElementById('langToggle').addEventListener('click', () => {
      currentLang = currentLang === 'ru' ? 'en' : 'ru';
      localStorage.setItem('siteLang', currentLang);
      updateLanguage();
    });

    updateLanguage();

    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏
    gsap.fromTo('.main_hi', { opacity: 0 }, { opacity: 1, duration: 1, ease: "power2.out" });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–¥–∏–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('DOMContentLoaded', initializeMedia);
  </script>
</body>
</html>